node_modules/got/dist/source/core/index.jsfunction  (e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return O;}});let i=r("@swc/helpers/_/_interop_require_default"),o=r("@swc/helpers/_/_interop_require_wildcard"),n=i._(r("node:process")),d=r("node:buffer"),h=r("node:stream"),u=o._(r("node:http")),l=i._(r("658c17b5")),c=o._(r("b316bb09")),f=i._(r("9949d55f")),p=o._(r("d23ccf44")),_=r("9a339d14"),y=i._(r("00e11ac5")),m=i._(r("e929b3d0")),w=i._(r("0b8df206")),g=o._(r("0fc7261b")),b=i._(r("872953d1")),R=i._(r("648c0112")),q=i._(r("954d7c4c")),E=i._(r("28b4386e")),S=r("44da949c"),v=i._(r("d31dcc11")),z=i._(r("271c4339")),C=r("3874ca57"),k=p.default.string(n.default.versions.brotli),T=new Set(["GET","HEAD"]),P=new R.default,B=new Set([300,301,302,303,304,307,308]),U=["socket","connect","continue","information","upgrade"],j=()=>{};class O extends h.Duplex{["constructor"];_noPipe;options;response;requestUrl;redirectUrls;retryCount;_stopRetry;_downloadedSize;_uploadedSize;_stopReading;_pipedServerResponses;_request;_responseSize;_bodySize;_unproxyEvents;_isFromCache;_cannotHaveBody;_triggerRead;_cancelTimeouts;_removeListeners;_nativeResponse;_flushed;_aborted;_requestInitialized;constructor(e,t,r){super({autoDestroy:!1,highWaterMark:0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=j,this._triggerRead=!1,this._cancelTimeouts=j,this._removeListeners=j,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=j,this.on("pipe",e=>{e?.headers&&Object.assign(this.options.headers,e.headers);}),this.on("newListener",e=>{if("retry"===e&&this.listenerCount("retry")>0)throw Error("A retry listener has been attached already.");});try{if(this.options=new E.default(e,t,r),!this.options.url){if(""===this.options.prefixUrl)throw TypeError("Missing `url` property");this.options.url="";}this.requestUrl=this.options.url;}catch(t){let{options:e}=t;e&&(this.options=e),this.flush=async()=>{this.flush=async()=>{},this.destroy(t);};return;}let{body:s}=this.options;if(p.default.nodeStream(s)&&s.once("error",e=>{this._flushed?this._beforeError(new C.UploadError(e,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new C.UploadError(e,this));};}),this.options.signal){let e=()=>{this.destroy(new C.AbortError(this));};this.options.signal.aborted?e():(this.options.signal.addEventListener("abort",e),this._removeListeners=()=>{this.options.signal?.removeEventListener("abort",e);});}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return;}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0;}catch(e){this._beforeError(e);}}}_beforeError(e){if(this._stopReading)return;let{response:t,options:r}=this,s=this.retryCount+("RetryError"===e.name?0:1);this._stopReading=!0,e instanceof C.RequestError||(e=new C.RequestError(e.message,e,this));let i=e;(async()=>{if(t?.readable&&!t.rawBody&&!this._request?.socket?.destroyed&&(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),0!==this.listenerCount("retry")){let o;try{let e;t&&"retry-after"in t.headers&&(e=Number(t.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(t.headers["retry-after"])-Date.now())<=0&&(e=1):e*=1e3);let n=r.retry;o=await n.calculateDelay({attemptCount:s,retryOptions:n,error:i,retryAfter:e,computedValue:(0,q.default)({attemptCount:s,retryOptions:n,error:i,retryAfter:e,computedValue:n.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})});}catch(e){this._error(new C.RequestError(e.message,e,this));return;}if(o){if(await new Promise(e=>{let t=setTimeout(e,o);this._stopRetry=()=>{clearTimeout(t),e();};}),this.destroyed)return;try{for(let e of this.options.hooks.beforeRetry)await e(i,this.retryCount+1);}catch(t){this._error(new C.RequestError(t.message,e,this));return;}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,e=>{let t=new O(r.url,e,r);return t.retryCount=this.retryCount+1,n.default.nextTick(()=>{t.flush();}),t;});return;}}this._error(i);})();}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){let t;for(e.readableLength&&(this._triggerRead=!1);null!==(t=e.read());){this._downloadedSize+=t.length;let e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t);}}}_write(e,t,r){let s=()=>{this._writeRequest(e,t,r);};this._requestInitialized?s():this._jobs.push(s);}_final(e){let t=()=>{if(!this._request||this._request.destroyed){e();return;}this._request.end(t=>{this._request._writableState?.errored||(t||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(t));});};this._requestInitialized?t():this._jobs.push(t);}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){let{body:e}=this.options;p.default.nodeStream(e)&&e.destroy();}this._request&&this._request.destroy(),null===e||p.default.undefined(e)||e instanceof C.RequestError||(e=new C.RequestError(e.message,e,this)),t(e);}pipe(e,t){return e instanceof u.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t);}unpipe(e){return e instanceof u.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this;}async _finalizeBody(){let{options:e}=this,{headers:t}=e,r=!p.default.undefined(e.form),s=!p.default.undefined(e.json),i=!p.default.undefined(e.body),o=T.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=o,r||s||i){if(o)throw TypeError(`The \`${e.method}\` method cannot be used with a body`);let s=!p.default.string(t["content-type"]);if(i){if((0,_.isFormData)(e.body)){let r=new _.FormDataEncoder(e.body);s&&(t["content-type"]=r.headers["Content-Type"]),"Content-Length"in r.headers&&(t["content-length"]=r.headers["Content-Length"]),e.body=r.encode();}(0,m.default)(e.body)&&s&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`);}else if(r){s&&(t["content-type"]="application/x-www-form-urlencoded");let{form:r}=e;e.form=void 0,e.body=new URLSearchParams(r).toString();}else{s&&(t["content-type"]="application/json");let{json:r}=e;e.json=void 0,e.body=e.stringifyJson(r);}let n=await (0,y.default)(e.body,e.headers);p.default.undefined(t["content-length"])&&p.default.undefined(t["transfer-encoding"])&&!o&&!p.default.undefined(n)&&(t["content-length"]=String(n));}"json"!==e.responseType||"accept"in e.headers||(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0;}async _onResponseBase(e){if(this.isAborted)return;let{options:t}=this,{url:r}=t;this._nativeResponse=e,t.decompress&&(e=(0,f.default)(e));let s=e.statusCode,i=e;i.statusMessage=i.statusMessage??u.default.STATUS_CODES[s],i.url=t.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirectUrls,i.request=this,i.isFromCache=this._nativeResponse.fromCache??!1,i.ip=this.ip,i.retryCount=this.retryCount,i.ok=(0,S.isResponseOk)(i),this._isFromCache=i.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=i,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress);}),e.once("error",t=>{this._aborted=!0,e.destroy(),this._beforeError(new C.ReadError(t,this));}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new C.ReadError({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this));}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(p.default.object(t.cookieJar)&&o){let e=o.map(async e=>t.cookieJar.setCookie(e,r.toString()));t.ignoreInvalidCookies&&(e=e.map(async e=>{try{await e;}catch{}}));try{await Promise.all(e);}catch(e){this._beforeError(e);return;}}if(!this.isAborted){if(e.headers.location&&B.has(s)&&("function"==typeof t.followRedirect?t.followRedirect(i):t.followRedirect)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects){this._beforeError(new C.MaxRedirectsError(this));return;}this._request=void 0;let o=new E.default(void 0,void 0,this.options),n=303===s&&"GET"!==o.method&&"HEAD"!==o.method,h=307!==s&&308!==s,u=o.methodRewriting&&h;(n||u)&&(o.method="GET",o.body=void 0,o.json=void 0,o.form=void 0,delete o.headers["content-length"]);try{let t=d.Buffer.from(e.headers.location,"binary").toString(),s=new URL(t,r);if(!(0,z.default)(r)&&(0,z.default)(s)){this._beforeError(new C.RequestError("Cannot redirect to UNIX socket",{},this));return;}for(let e of(s.hostname!==r.hostname||s.port!==r.port?("host"in o.headers&&delete o.headers.host,"cookie"in o.headers&&delete o.headers.cookie,"authorization"in o.headers&&delete o.headers.authorization,(o.username||o.password)&&(o.username="",o.password="")):(s.username=o.username,s.password=o.password),this.redirectUrls.push(s),o.prefixUrl="",o.url=s,o.hooks.beforeRedirect))await e(o,i);this.emit("redirect",o,i),this.options=o,await this._makeRequest();}catch(e){this._beforeError(e);}return;}if(t.isStream&&t.throwHttpErrors&&!(0,S.isResponseOk)(i)){this._beforeError(new C.HTTPError(i));return;}if(e.on("readable",()=>{this._triggerRead&&this._read();}),this.on("resume",()=>{e.resume();}),this.on("pause",()=>{e.pause();}),e.once("end",()=>{this.push(null);}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return;}for(let r of(this.emit("response",e),this._pipedServerResponses))if(!r.headersSent){for(let s in e.headers){let i=!t.decompress||"content-encoding"!==s,o=e.headers[s];i&&r.setHeader(s,o);}r.statusCode=s;}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let t=await e.toArray(),r=(0,p.isBuffer)(t.at(0))?d.Buffer.concat(t):d.Buffer.from(t.join(""));if(!this.isAborted)return this.response.rawBody=r,!0;}catch{}return!1;}async _onResponse(e){try{await this._onResponseBase(e);}catch(e){this._beforeError(e);}}_onRequest(e){let{options:t}=this,{timeout:r,url:s}=t;(0,l.default)(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=(0,g.default)(e,r,s);let i=t.cache?"cacheableResponse":"response";e.once(i,e=>{this._onResponse(e);}),e.once("error",t=>{this._aborted=!0,e.destroy(),t=t instanceof g.TimeoutError?new C.TimeoutError(t,this.timings,this):new C.RequestError(t.message,t,this),this._beforeError(t);}),this._unproxyEvents=(0,w.default)(e,this,U),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e);}async _asyncWrite(e){return new Promise((t,r)=>{super.write(e,e=>{if(e){r(e);return;}t();});});}_sendBody(){let{body:e}=this.options,t=0===this.redirectUrls.length?this:this._request??this;p.default.nodeStream(e)?e.pipe(t):p.default.generator(e)||p.default.asyncGenerator(e)?(async()=>{try{for await(let t of e)await this._asyncWrite(t);super.end();}catch(e){this._beforeError(e);}})():p.default.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,()=>{}),t.end());}_prepareCache(e){if(!P.has(e)){let t=new c.default((e,t)=>{let r=e._request(e,t);return p.default.promise(r)&&(r.once=(e,t)=>{if("error"===e)(async()=>{try{await r;}catch(e){t(e);}})();else if("abort"===e||"destroy"===e)(async()=>{try{(await r).once(e,t);}catch{}})();else throw Error(`Unknown HTTP2 promise event: ${e}`);return r;}),r;},e);P.set(e,t.request());}}async _createCacheableRequest(e,t){return new Promise((r,s)=>{let i;Object.assign(t,(0,b.default)(e));let o=P.get(t.cache)(t,async e=>{if(e._readableState.autoDestroy=!1,i){let t=()=>{e.req&&(e.complete=e.req.res.complete);};e.prependOnceListener("end",t),t(),(await i).emit("cacheableResponse",e);}r(e);});o.once("error",s),o.once("request",async e=>{r(i=e);});});}async _makeRequest(){let e;let{options:t}=this,{headers:r,username:s,password:i}=t,o=t.cookieJar;for(let e in r)if(p.default.undefined(r[e]))delete r[e];else if(p.default.null(r[e]))throw TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(t.decompress&&p.default.undefined(r["accept-encoding"])&&(r["accept-encoding"]=k?"gzip, deflate, br":"gzip, deflate"),s||i){let e=d.Buffer.from(`${s}:${i}`).toString("base64");r.authorization=`Basic ${e}`;}if(o){let e=await o.getCookieString(t.url.toString());p.default.nonEmptyString(e)&&(r.cookie=e);}for(let r of(t.prefixUrl="",t.hooks.beforeRequest)){let s=await r(t);if(!p.default.undefined(s)){e=()=>s;break;}}e||=t.getRequestFunction();let n=t.url;this._requestOptions=t.createNativeRequestOptions(),t.cache&&(this._requestOptions._request=e,this._requestOptions.cache=t.cache,this._requestOptions.body=t.body,this._prepareCache(t.cache));let h=t.cache?this._createCacheableRequest:e;try{let e=h(n,this._requestOptions);p.default.promise(e)&&(e=await e),p.default.undefined(e)&&(e=t.getFallbackRequestFunction()(n,this._requestOptions),p.default.promise(e)&&(e=await e)),(0,v.default)(e)?this._onRequest(e):this.writable?(this.once("finish",()=>{this._onResponse(e);}),this._sendBody()):this._onResponse(e);}catch(e){if(e instanceof c.CacheError)throw new C.CacheError(e,this);throw e;}}async _error(e){try{if(e instanceof C.HTTPError&&!this.options.throwHttpErrors);else for(let t of this.options.hooks.beforeError)e=await t(e);}catch(t){e=new C.RequestError(t.message,t,this);}this.destroy(e);}_writeRequest(e,t,r){this._request&&!this._request.destroyed&&this._request.write(e,t,s=>{if(!s&&!this._request.destroyed){this._uploadedSize+=d.Buffer.byteLength(e,t);let r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r);}r(s);});}get ip(){return this.socket?.remoteAddress;}get isAborted(){return this._aborted;}get socket(){return this._request?.socket??void 0;}get downloadProgress(){return{percent:this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,transferred:this._downloadedSize,total:this._responseSize};}get uploadProgress(){return{percent:this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,transferred:this._uploadedSize,total:this._bodySize};}get timings(){return this._request?.timings;}get isFromCache(){return this._isFromCache;}get reusedSocket(){return this._request?.reusedSocket;}}} Y8  ¦Çÿÿnode_modules/got/dist/source/core/index.jsnode:processnode:buffernode:streamnode:http      Òÿÿÿ   Öÿÿÿ   Ùÿÿÿ	   Üÿÿÿ*   üÆÿÿ        pÿÿÿ*   tÿÿÿ        \ÿÿÿ        Y8  iž  ¨ÿÿÿ   Àÿÿÿ    