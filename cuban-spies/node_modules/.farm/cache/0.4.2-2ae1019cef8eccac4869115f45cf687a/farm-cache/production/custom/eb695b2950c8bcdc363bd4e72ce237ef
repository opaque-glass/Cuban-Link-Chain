node_modules/htmlparser2/lib/esm/Tokenizer.jsfunction  (t,e,i,s){"use strict";var n,r,h,o,c,u;Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var i in e)Object.defineProperty(t,i,{enumerable:!0,get:e[i]});}(e,{QuoteType:function(){return h;},default:function(){return f;}});let l=i("42dc32b2");function d(t){return t===n.Space||t===n.NewLine||t===n.Tab||t===n.FormFeed||t===n.CarriageReturn;}function m(t){return t===n.Slash||t===n.Gt||d(t);}function S(t){return t>=n.Zero&&t<=n.Nine;}(o=n||(n={}))[o.Tab=9]="Tab",o[o.NewLine=10]="NewLine",o[o.FormFeed=12]="FormFeed",o[o.CarriageReturn=13]="CarriageReturn",o[o.Space=32]="Space",o[o.ExclamationMark=33]="ExclamationMark",o[o.Number=35]="Number",o[o.Amp=38]="Amp",o[o.SingleQuote=39]="SingleQuote",o[o.DoubleQuote=34]="DoubleQuote",o[o.Dash=45]="Dash",o[o.Slash=47]="Slash",o[o.Zero=48]="Zero",o[o.Nine=57]="Nine",o[o.Semi=59]="Semi",o[o.Lt=60]="Lt",o[o.Eq=61]="Eq",o[o.Gt=62]="Gt",o[o.Questionmark=63]="Questionmark",o[o.UpperA=65]="UpperA",o[o.LowerA=97]="LowerA",o[o.UpperF=70]="UpperF",o[o.LowerF=102]="LowerF",o[o.UpperZ=90]="UpperZ",o[o.LowerZ=122]="LowerZ",o[o.LowerX=120]="LowerX",o[o.OpeningSquareBracket=91]="OpeningSquareBracket",(c=r||(r={}))[c.Text=1]="Text",c[c.BeforeTagName=2]="BeforeTagName",c[c.InTagName=3]="InTagName",c[c.InSelfClosingTag=4]="InSelfClosingTag",c[c.BeforeClosingTagName=5]="BeforeClosingTagName",c[c.InClosingTagName=6]="InClosingTagName",c[c.AfterClosingTagName=7]="AfterClosingTagName",c[c.BeforeAttributeName=8]="BeforeAttributeName",c[c.InAttributeName=9]="InAttributeName",c[c.AfterAttributeName=10]="AfterAttributeName",c[c.BeforeAttributeValue=11]="BeforeAttributeValue",c[c.InAttributeValueDq=12]="InAttributeValueDq",c[c.InAttributeValueSq=13]="InAttributeValueSq",c[c.InAttributeValueNq=14]="InAttributeValueNq",c[c.BeforeDeclaration=15]="BeforeDeclaration",c[c.InDeclaration=16]="InDeclaration",c[c.InProcessingInstruction=17]="InProcessingInstruction",c[c.BeforeComment=18]="BeforeComment",c[c.CDATASequence=19]="CDATASequence",c[c.InSpecialComment=20]="InSpecialComment",c[c.InCommentLike=21]="InCommentLike",c[c.BeforeSpecialS=22]="BeforeSpecialS",c[c.SpecialStartSequence=23]="SpecialStartSequence",c[c.InSpecialTag=24]="InSpecialTag",c[c.BeforeEntity=25]="BeforeEntity",c[c.BeforeNumericEntity=26]="BeforeNumericEntity",c[c.InNamedEntity=27]="InNamedEntity",c[c.InNumericEntity=28]="InNumericEntity",c[c.InHexEntity=29]="InHexEntity",(u=h||(h={}))[u.NoValue=0]="NoValue",u[u.Unquoted=1]="Unquoted",u[u.Single=2]="Single",u[u.Double=3]="Double";let b={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class f{constructor({xmlMode:t=!1,decodeEntities:e=!0},i){this.cbs=i,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=t,this.decodeEntities=e,this.entityTrie=t?l.xmlDecodeTree:l.htmlDecodeTree;}reset(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0;}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse();}end(){this.running&&this.finish();}pause(){this.running=!1;}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse();}getIndex(){return this.index;}getSectionStart(){return this.sectionStart;}stateText(t){t===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===n.Amp&&(this.state=r.BeforeEntity);}stateSpecialStartSequence(t){let e=this.sequenceIndex===this.currentSequence.length;if(e?m(t):(32|t)===this.currentSequence[this.sequenceIndex]){if(!e){this.sequenceIndex++;return;}}else this.isSpecial=!1;this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(t);}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===n.Gt||d(t)){let e=this.index-this.currentSequence.length;if(this.sectionStart<e){let t=this.index;this.index=e,this.cbs.ontext(this.sectionStart,e),this.index=t;}this.isSpecial=!1,this.sectionStart=e+2,this.stateInClosingTagName(t);return;}this.sequenceIndex=0;}(32|t)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===b.TitleEnd?this.decodeEntities&&t===n.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(t===n.Lt);}stateCDATASequence(t){t===b.Cdata[this.sequenceIndex]?++this.sequenceIndex===b.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=b.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(t));}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1;}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===b.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0);}isTagStartChar(t){return this.xmlMode?!m(t):t>=n.LowerA&&t<=n.LowerZ||t>=n.UpperA&&t<=n.UpperZ;}startSpecial(t,e){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=e,this.state=r.SpecialStartSequence;}stateBeforeTagName(t){if(t===n.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===n.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){let e=32|t;this.sectionStart=this.index,this.xmlMode||e!==b.TitleEnd[2]?this.state=this.xmlMode||e!==b.ScriptEnd[2]?r.InTagName:r.BeforeSpecialS:this.startSpecial(b.TitleEnd,3);}else t===n.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(t));}stateInTagName(t){m(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(t));}stateBeforeClosingTagName(t){d(t)||(t===n.Gt?this.state=r.Text:(this.state=this.isTagStartChar(t)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index));}stateInClosingTagName(t){(t===n.Gt||d(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(t));}stateAfterClosingTagName(t){(t===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1);}stateBeforeAttributeName(t){t===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):t===n.Slash?this.state=r.InSelfClosingTag:d(t)||(this.state=r.InAttributeName,this.sectionStart=this.index);}stateInSelfClosingTag(t){t===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):d(t)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(t));}stateInAttributeName(t){(t===n.Eq||m(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(t));}stateAfterAttributeName(t){t===n.Eq?this.state=r.BeforeAttributeValue:t===n.Slash||t===n.Gt?(this.cbs.onattribend(h.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(t)):d(t)||(this.cbs.onattribend(h.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index);}stateBeforeAttributeValue(t){t===n.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):t===n.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):d(t)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t));}handleInAttributeValue(t,e){t===e||!this.decodeEntities&&this.fastForwardTo(e)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(e===n.DoubleQuote?h.Double:h.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&t===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity);}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,n.DoubleQuote);}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,n.SingleQuote);}stateInAttributeValueNoQuotes(t){d(t)||t===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(h.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity);}stateBeforeDeclaration(t){t===n.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=t===n.Dash?r.BeforeComment:r.InDeclaration;}stateInDeclaration(t){(t===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1);}stateInProcessingInstruction(t){(t===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1);}stateBeforeComment(t){t===n.Dash?(this.state=r.InCommentLike,this.currentSequence=b.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration;}stateInSpecialComment(t){(t===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1);}stateBeforeSpecialS(t){let e=32|t;e===b.ScriptEnd[3]?this.startSpecial(b.ScriptEnd,4):e===b.StyleEnd[3]?this.startSpecial(b.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(t));}stateBeforeEntity(t){this.entityExcess=1,this.entityResult=0,t===n.Number?this.state=r.BeforeNumericEntity:t===n.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(t));}stateInNamedEntity(t){if(this.entityExcess+=1,this.trieIndex=(0,l.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,t),this.trieIndex<0){this.emitNamedEntity(),this.index--;return;}this.trieCurrent=this.entityTrie[this.trieIndex];let e=this.trieCurrent&l.BinTrieFlags.VALUE_LENGTH;if(e){let i=(e>>14)-1;if(this.allowLegacyEntity()||t===n.Semi){let t=this.index-this.entityExcess+1;t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.entityResult=this.trieIndex,this.trieIndex+=i,this.entityExcess=0,this.sectionStart=this.index+1,0===i&&this.emitNamedEntity();}else this.trieIndex+=i;}}emitNamedEntity(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&l.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~l.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2]);}}stateBeforeNumericEntity(t){(32|t)===n.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(t));}emitNumericEntity(t){let e=this.index-this.entityExcess-1;e+2+Number(this.state===r.InHexEntity)!==this.index&&(e>this.sectionStart&&this.emitPartial(this.sectionStart,e),this.sectionStart=this.index+Number(t),this.emitCodePoint((0,l.replaceCodePoint)(this.entityResult))),this.state=this.baseState;}stateInNumericEntity(t){t===n.Semi?this.emitNumericEntity(!0):S(t)?(this.entityResult=10*this.entityResult+(t-n.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--);}stateInHexEntity(t){t===n.Semi?this.emitNumericEntity(!0):S(t)?(this.entityResult=16*this.entityResult+(t-n.Zero),this.entityExcess++):t>=n.UpperA&&t<=n.UpperF||t>=n.LowerA&&t<=n.LowerF?(this.entityResult=16*this.entityResult+((32|t)-n.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--);}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag);}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===r.InAttributeValueDq||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index));}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running;}parse(){for(;this.shouldContinue();){let t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:this.stateText(t);break;case r.SpecialStartSequence:this.stateSpecialStartSequence(t);break;case r.InSpecialTag:this.stateInSpecialTag(t);break;case r.CDATASequence:this.stateCDATASequence(t);break;case r.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(t);break;case r.InAttributeName:this.stateInAttributeName(t);break;case r.InCommentLike:this.stateInCommentLike(t);break;case r.InSpecialComment:this.stateInSpecialComment(t);break;case r.BeforeAttributeName:this.stateBeforeAttributeName(t);break;case r.InTagName:this.stateInTagName(t);break;case r.InClosingTagName:this.stateInClosingTagName(t);break;case r.BeforeTagName:this.stateBeforeTagName(t);break;case r.AfterAttributeName:this.stateAfterAttributeName(t);break;case r.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(t);break;case r.BeforeAttributeValue:this.stateBeforeAttributeValue(t);break;case r.BeforeClosingTagName:this.stateBeforeClosingTagName(t);break;case r.AfterClosingTagName:this.stateAfterClosingTagName(t);break;case r.BeforeSpecialS:this.stateBeforeSpecialS(t);break;case r.InAttributeValueNq:this.stateInAttributeValueNoQuotes(t);break;case r.InSelfClosingTag:this.stateInSelfClosingTag(t);break;case r.InDeclaration:this.stateInDeclaration(t);break;case r.BeforeDeclaration:this.stateBeforeDeclaration(t);break;case r.BeforeComment:this.stateBeforeComment(t);break;case r.InProcessingInstruction:this.stateInProcessingInstruction(t);break;case r.InNamedEntity:this.stateInNamedEntity(t);break;case r.BeforeEntity:this.stateBeforeEntity(t);break;case r.InHexEntity:this.stateInHexEntity(t);break;case r.InNumericEntity:this.stateInNumericEntity(t);break;default:this.stateBeforeNumericEntity(t);}this.index++;}this.cleanup();}finish(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend();}handleTrailingData(){let t=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===b.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,t);}emitPartial(t,e){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(t,e):this.cbs.ontext(t,e);}emitCodePoint(t){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(t):this.cbs.ontextentity(t);}}} b?  Àÿÿnode_modules/htmlparser2/lib/esm/Tokenizer.js   -   8Àÿÿ        ¸ÿÿÿ-   ¼ÿÿÿ        ¤ÿÿÿ        b?  ‰  Èÿÿÿ    Àÿÿÿ    